---
title: "The Lost Sheep"  # Sets the Title.
subtitle: "by Kameron York"
output:
  html_document:
    includes:
      in_header: "https://raw.githubusercontent.com/kameronyork/kameronyork.github.io/main/parables/headers/lost-sheep-header.html"
      after_body: "https://raw.githubusercontent.com/kameronyork/kameronyork.github.io/main/parables/footer.html"
---

<script>
document.addEventListener("DOMContentLoaded", function() {
    async function fetchJSON() {
        const response = await fetch("https://kameronyork.com/datasets/all-footnotes-apr-2024.json");
        return response.json();
    }

    function createTableView(entries) {
        let tableHTML = `<table border="1" style="width: 100%; border-collapse: collapse;">
            <tr>
                <th style="text-align: center;">%</th>
                <th>Year</th>
                <th>Month</th>
                <th>Speaker</th>
                <th>Talk Title</th>
            </tr>`;

        entries.forEach(entry => {
            const titleLink = entry.hyperlink ? `<a href="${entry.hyperlink}" target="_blank">${entry.title}</a>` : entry.title;
            tableHTML += `<tr>
                <td style="text-align: center; position: relative;">
                    <div style="background-color: #F39C12; width: ${entry.perc_quoted}%; height: 100%; position: absolute; left: 0; top: 0;"></div>
                    <div style="position: relative; z-index: 1;">${entry.perc_quoted}%</div>
                </td>
                <td>${entry.talk_year}</td>
                <td>${entry.talk_month}</td>
                <td>${entry.speaker}</td>
                <td>${titleLink}</td>
            </tr>`;
        });

        tableHTML += '</table>';
        return tableHTML;
    }

    async function displayTableForScripture(scripturePath) {
        const data = await fetchJSON();
        const filteredEntries = data.filter(entry => entry.scripture === scripturePath);
        const tableHTML = createTableView(filteredEntries);
        document.getElementById("scripture-table-container").innerHTML = tableHTML;
    }

    // Define the scripture here
    const scriptureToDisplay = "John 3:16"; // Change this to your desired scripture
    displayTableForScripture(scriptureToDisplay);
});
</script>

<div id="scripture-table-container"></div>
